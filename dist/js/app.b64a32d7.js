(function(t){function e(e){for(var n,i,o=e[0],u=e[1],c=e[2],h=0,f=[];h<o.length;h++)i=o[h],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,o=1;o<r.length;o++){var u=r[o];0!==a[u]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},a={app:0},s=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{color:"primary",dark:""}},[r("v-container",{attrs:{fluid:""}},[r("v-tabs",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[r("v-tab",[t._v(" Main ")]),r("v-tab",[t._v(" Settings ")]),r("v-tab",[t._v(" Output ")]),r("v-tab",[t._v(" About ")])],1),r("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[r("v-tab-item",[r("Shuffle",{ref:"shuffle",attrs:{width:t.width,height:t.height,items:t.items,quotas:t.quotas,ingroup:t.ingroup,groups:t.groups,onUpdateGroups:t.updateGroups}})],1),r("v-tab-item",[r("Settings",{ref:"settings",attrs:{"update-settings":t.updateSettings,width:t.width,height:t.height,items:t.textItems,quotas:t.textQuotas}})],1),r("v-tab-item",[r("v-container",[r("table",[r("thead",[r("tr",[r("th",[t._v("Name")]),r("th",[t._v("Group")])])]),r("tbody",[r("tr",[r("td",[t._v("item.name")]),r("td",[t._v("ingroup[item.index]")])])])])]),t._v(" "+t._s(t.ingroup)+" ")],1),r("v-tab-item",[r("v-container",[r("p",[r("v-btn",{attrs:{href:"https://github.com/dfukagaw28/adalabadala",target:"_blank",rel:"noopener noreferrer",text:""}},[r("v-icon",[t._v("mdi-github")]),t._v(" dfukagaw28/adalabadala ")],1)],1),r("p",[r("a",{attrs:{href:"https://www.cis.doshisha.ac.jp/",target:"_blank",rel:"noopener noreferrer"}},[t._v(" Faculty of Culture and Information Science, ")]),r("br"),r("a",{attrs:{href:"https://www.doshisha.ac.jp/",target:"_blank",rel:"noopener noreferrer"}},[t._v(" Doshisha University ")])])])],1)],1)],1)],1)},s=[],i=(r("13d5"),r("a434"),r("a15b"),r("99af"),r("ac1f"),r("1276"),r("d81d"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"text-center"},[r("v-col",{attrs:{md:"8",sm:"12"}},[r("v-container",[r("v-row",[r("v-col",[r("Controller",{ref:"controller",attrs:{onReset:t.reset}})],1)],1),r("v-row",[r("v-col",[r("Canvas",{ref:"canvas",attrs:{width:t.width,height:t.height,balls:t.itemObjs,quotas:t.quotas,groups:t.groups,ingroup:t.ingroup,onUpdateGroups:t.onUpdateGroups}})],1)],1)],1)],1),r("v-col",{attrs:{md:"4",sm:"12"}},[r("Table",{attrs:{items:t.itemObjs,groups:t.groups,ingroup:t.ingroup}})],1)],1)],1)}),o=[],u=(r("a9e3"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"canvas"},[r("canvas",{attrs:{width:t.width,height:t.height}})])}),c=[],l=r("2909"),h=r("b85c"),f=r("d4ec"),p=(r("cb29"),r("b0c0"),r("159b"),r("fb6a"),.99),v=.99,d=.001,g=.99,b=1,y=20,m=2*Math.PI,x=["#ff2800","#faf500","#35a16b","#0041ff","#66ccff","#ff99a0","#ff9900","#9a0079","#663300","#ffd1d1","#ffff99","#cbf266","#b4ebfa","#edc58f","#87e7b0","#c7b2de","#c8c8cb","#7f878f"],w=["#cc0000","#00cc00","#0000cc","#cccc00","#cc00cc","#00cccc"];function q(t){return Math.random()*t}function _(t){return Math.floor(q(t))}function j(t){return t[_(t.length)]}var O=function t(e,r,n,a,s){Object(f["a"])(this,t),this.x=r||q(e.width),this.y=n||q(e.height),this.r=a||y,this.color=s||j(x),this.vx=100*Math.random()-50,this.vy=100*Math.random()-50},$=function t(e,r,n,a,s){Object(f["a"])(this,t),this.x1=e,this.y1=r,this.x2=n,this.y2=a,this.color=s};function A(t,e){var r=t.width,n=t.height;e.y+=e.vy*b,e.x+=e.vx*b,e.y>n-e.r&&(e.vy=-e.vy*p,e.y=n-e.r),e.x<e.r&&(e.vx=-e.vx*p,e.x=e.r),e.x>r-e.r&&(e.vx=-e.vx*p,e.x=r-e.r),e.y<e.r&&(e.vy=-e.vy*p,e.y=e.r),e.vy*=g,e.vx*=g}function S(t,e){var r=e.x-t.x,n=e.y-t.y,a=r*r+n*n,s=t.r+e.r;if(s*s<a)return a;var i=Math.sqrt(a),o=s-i;i>0&&(i=1/i),r*=i,n*=i,o/=2,t.x-=r*o,t.y-=n*o,e.x+=r*o,e.y+=n*o;var u=v*((e.vx-t.vx)*r+(e.vy-t.vy)*n),c=v*((t.vx-e.vx)*r+(t.vy-e.vy)*n);t.vx+=u*r,t.vy+=u*n,e.vx+=c*r,e.vy+=c*n,Math.abs(t.vx)<1&&(t.vx=0),Math.abs(t.vy)<1&&(t.vy=0),Math.abs(e.vx)<1&&(e.vx=0),Math.abs(e.vy)<1&&(e.vy=0)}function C(t,e){var r=e.x-t.x,n=e.y-t.y;return r*r+n*n}function k(t,e){var r,n=0,a=0,s=Object(h["a"])(e);try{for(s.s();!(r=s.n()).done;){var i=r.value;n+=t[i].x,a+=t[i].y}}catch(o){s.e(o)}finally{s.f()}return n/=e.length,a/=e.length,{x:n,y:a}}function P(t,e){for(var r=new Array(e.length),n=0;n<e.length;n++)r[n]=k(t,e[n]);return r}function G(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function I(t,e){t.splice.apply(t,[0,t.length].concat(Object(l["a"])(e)))}function M(){window.theCanvas.isPaused||(window.theCanvas.update(),window.theCanvas.draw(),requestAnimationFrame(M))}var V={props:{width:{type:Number,required:!0},height:{type:Number,required:!0},balls:{type:Array,required:!0},quotas:{type:Array,required:!0},groups:{type:Array,required:!0},ingroup:{type:Array,required:!0},onUpdateGroups:{type:Function,required:!0}},data:function(){return{centers:[],lines:[]}},computed:{canvas:function(){return this.$el.querySelector("canvas")},isPaused:function(){console.log("isPaused()");try{return this.$parent.$refs.controller.isPaused}catch(t){}return!0},textBalls:function(){try{var t=this.$root.$children[0].$refs.settings;return console.log(t.items),t.items}catch(e){return[]}}},methods:{resize:function(){this.reset()},draw:function(){var t=this.canvas;this.ctx.clearRect(0,0,t.width,t.height);var e,r=Object(h["a"])(this.ballObjs);try{for(r.s();!(e=r.n()).done;){var n=e.value;this.ctx.beginPath(),this.ctx.fillStyle=n.color,this.ctx.arc(n.x,n.y,n.r,0,m),this.ctx.fill(),this.ctx.fillStyle="black",this.ctx.font="bold 22px 'ＭＳ Ｐゴシック'",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(n.name,n.x,n.y)}}catch(o){r.e(o)}finally{r.f()}var a,s=Object(h["a"])(this.lines);try{for(s.s();!(a=s.n()).done;){var i=a.value;this.ctx.beginPath(),this.ctx.strokeStyle=i.color,this.ctx.moveTo(i.x1,i.y1),this.ctx.lineTo(i.x2,i.y2),this.ctx.closePath(),this.ctx.stroke()}}catch(o){s.e(o)}finally{s.f()}},update:function(){this.canvas.width,this.canvas.height;for(var t=this.ballObjs,e=t.length-1;e>=0;e--)for(var r=0;r<this.centers.length;r++){var n=this.centers[r],a=n.x-t[e].x,s=n.y-t[e].y;r==this.ingroup[e]?(t[e].vx+=a*d,t[e].vy+=s*d):(t[e].vx+=-.3/(a*a*this.centers.length),t[e].vy+=-.3/(s*s*this.centers.length));var i=t[e].r;t[e].vx>+i&&(t[e].vx=+i),t[e].vx<-i&&(t[e].vx=-i),t[e].vy>+i&&(t[e].vy=+i),t[e].vy<-i&&(t[e].vy=-i),A(this.canvas,t[e])}for(var o=0;o<this.ballObjs.length;o++)for(var u=this.ballObjs[o],c=o+1;c<this.ballObjs.length;c++){var l=this.ballObjs[c];S(u,l)}this.updateGroups()},initGroupArrays:function(t){for(var e=t.length,r=this.quotas.length,n=new Array(r),a=0;a<r;a++)n[a]=[],n[a].index=a,n[a].color=w[a%w.length];for(var s=0;s<e;s++)n[t[s]].push(s);n.sort((function(t,r){return-(t.length-r.length)*e*2+(t[0]-r[0])}));for(var i=0;i<r;i++){var o,u=Object(h["a"])(n[i]);try{for(u.s();!(o=u.n()).done;){var c=o.value;t[c]=i}}catch(l){u.e(l)}finally{u.f()}}return n},updateGroups:function(){var t=this,e=this.balls.length,r=this.groups.length,n=this.ballObjs;this.lines.splice(0);for(var a,s,i,o=new Array(e),u=0;u<e;u++)o[u]=new Array(e);for(var c=0;c<e;c++)for(var l=n[c],h=0;h<e;h++){var f=n[h];o[c][h]=c==h?1/0:C(l,f)}for(var p=function(o){if(r<2)return"break";i=P(n,t.groups);for(var u=new Array(e),c=0;c<e;c++){var l=0==c?1:0;u[c]=l;for(var h=C(n[c],i[l]),f=l+1;f<r;f++)if(f!=c){var p=C(n[c],i[f]);p<h&&(u[c]=f,h=p)}}s=u.slice(),a=t.initGroupArrays(s),i=P(n,a);for(var v=[],d=[],g=0;g<r;g++){var b=a[g],y=t.quotas[g];b.length>y?function(){var t=i[g],e=b.map((function(e){var r=C(n[e],t);return[e,r]}));e.sort((function(t,e){return t[1]-e[1]})),b=[];for(var r=0;r<y;r++)b.push(e[r][0]);for(var s=y;s<e.length;s++)v.push(e[s][0]);a[g]=b}():b.length<t.quotas[g]&&d.push(g)}var m=function(){var e=[],r=void 0,o=void 0;d.length>1?(v.forEach((function(t,r){var a=n[t];d.forEach((function(t,n){var s=i[t],o=C(a,s);e.push(new Array(r,n,o))}))})),e.sort((function(t,e){return t[2]-e[2]})),r=e[0][0],o=e[0][1]):(r=v.length-1,o=0);var u=v[r],c=d[o];s[u]=c,a[c].push(u),i[c]=k(n,a[c]),a[c].length==t.quotas[c]&&(G(d,o,d.length-1),d.pop()),G(v,r,v.length-1),v.pop()};while(v.length>0)m()},v=0;v<100;v++){var d=p(v);if("break"===d)break}this.onUpdateGroups(s),I(this.groups,a),I(this.ingroup,s),I(this.centers,i);var g=[];a.forEach((function(t,e){for(var r=w[e%w.length],a=0;a<t.length;a++)for(var s=t[a],i=n[s],o=a+1;o<t.length;o++){var u=t[o],c=n[u],l=new $(i.x,i.y,c.x,c.y,r);g.push(l)}})),I(this.lines,g)},reset:function(){var t=this.canvas;this.$parent.$refs.controller.isPaused=!0;for(var e=[],r=0;r<this.balls.length;r++){var n=new O(t);n.name=this.balls[r].name,n.color=x[r%x.length],n.index=r,e.push(n)}this.ballObjs=e;for(var a=new Array(this.balls.length),s=0;s<a.length;s++)a[s]=s%this.quotas.length;var i=this.initGroupArrays(a),o=P(this.ballObjs,i);I(this.groups,i),I(this.ingroup,a),I(this.centers,o),I(this.lines,[]),this.draw()},start:function(){console.log("start()"),window.theCanvas=this,this.$parent.$refs.controller.isPaused=!1,requestAnimationFrame(M)},pause:function(){this.$parent.$refs.controller.isPaused=!0},fitToWindow:function(){}},mounted:function(){this.ctx=this.canvas.getContext("2d"),this.reset()}},N=V,T=(r("648b"),r("2877")),E=Object(T["a"])(N,u,c,!1,null,"74aebec8",null),F=E.exports,U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-btn",{staticClass:"ma-2",attrs:{small:"",outlined:"",fab:"",color:"primary"},on:{click:t.onReset}},[r("v-icon",[t._v("mdi-replay")])],1),t.isPaused?r("v-btn",{staticClass:"ma-2",attrs:{small:"",outlined:"",fab:"",color:"primary"},on:{click:function(e){return t.play()}}},[r("v-icon",[t._v("mdi-play")])],1):r("v-btn",{staticClass:"ma-2",attrs:{small:"",outlined:"",fab:"",color:"primary"},on:{click:function(e){return t.pause()}}},[r("v-icon",[t._v("mdi-pause")])],1),r("v-btn",{staticClass:"ma-2",attrs:{small:"",outlined:"",fab:"",color:"primary"},on:{click:function(e){return t.fit()}}},[r("v-icon",[t._v("mdi-arrow-expand")])],1)],1)},R=[],Q={props:{onReset:{type:Function,required:!0}},data:function(){return{isPaused:!0}},methods:{reset:function(){console.log("reset()"),this.$parent.$refs.canvas.reset()},play:function(){this.$parent.$refs.canvas.start()},pause:function(){this.$parent.$refs.canvas.pause()},fit:function(){console.log("fit")}}},z=Q,W=r("6544"),B=r.n(W),H=r("8336"),J=r("132d"),D=Object(T["a"])(z,U,R,!1,null,null,null),K=D.exports;B()(D,{VBtn:H["a"],VIcon:J["a"]});var L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("table",[t._m(0),r("tbody",t._l(t.items,(function(e){return r("tr",{key:e.index},[r("td",[r("span",{style:{color:e.color}},[t._v("■")]),t._v(" "+t._s(e.name)+" ")]),r("td",{staticClass:"group_number"},t._l(t.groups,(function(n,a){return r("span",{key:n.index,style:{color:a==t.ingroup[e.index]?n.color:"#eeeeee"}},[t._v(" "+t._s(a+1)+" ")])})),0)])})),0)])])},X=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[t._v("Name")]),r("th",[t._v("Group")])])])}],Y={props:{items:{type:Array,required:!0},groups:{type:Array,required:!0},ingroup:{type:Array,required:!0}}},Z=Y,tt=(r("79d0"),Object(T["a"])(Z,L,X,!1,null,"8f320a86",null)),et=tt.exports,rt=["#ff2800","#faf500","#35a16b","#0041ff","#66ccff","#ff99a0","#ff9900","#9a0079","#663300","#ffd1d1","#ffff99","#cbf266","#b4ebfa","#edc58f","#87e7b0","#c7b2de","#c8c8cb","#7f878f"],nt={name:"Shuffle",components:{Canvas:F,Controller:K,Table:et},props:{width:{type:Number,required:!0},height:{type:Number,required:!0},items:{type:Array,required:!0},quotas:{type:Array,required:!0},ingroup:{type:Array,required:!0},groups:{type:Array,required:!0},onUpdateGroups:{type:Function,required:!0}},data:function(){return{isPaused:!0,itemObjs:[]}},methods:{reset:function(){console.log("shuffle reset()"),console.log(this.items);var t=this.items.length;this.itemObjs.splice(0);for(var e=0;e<t;e++)this.itemObjs.push({index:e,name:this.items[e],color:rt[e%rt.length]});console.log(this.itemObjs),this.onUpdateGroups(),"undefined"!==typeof this.$refs.canvas&&(console.log("xxx"),this.$refs.canvas.reset())},play:function(){this.$refs.canvas.start(),this.isPaused=!1},pause:function(){this.$refs.canvas.pause(),this.isPaused=!0},fit:function(){console.log("fit")},resizeCanvas:function(){this.$refs.canvas.resize()}},created:function(){console.log("shuffle created()"),this.reset()}},at=nt,st=r("62ad"),it=r("a523"),ot=r("0fd9"),ut=Object(T["a"])(at,i,o,!1,null,null,null),ct=ut.exports;B()(ut,{VCol:st["a"],VContainer:it["a"],VRow:ot["a"]});var lt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-row",[r("v-col",[r("v-text-field",{attrs:{label:"Width",value:t.width},on:{input:t.updateWidth}})],1),r("v-col",[r("v-text-field",{attrs:{label:"Height",value:t.height},on:{input:t.updateHeight}})],1)],1),r("v-row",[r("v-col",[r("v-textarea",{attrs:{label:"Items","auto-grow":"",value:t.items},on:{input:t.updateItems}})],1),r("v-col",[r("v-textarea",{attrs:{label:"Group sizes","auto-grow":"",value:t.quotas},on:{input:t.updateQuotas}})],1)],1)],1)},ht=[],ft=(r("4de4"),r("5319"),r("498a"),{props:{width:{type:Number,required:!0},height:{type:Number,required:!0},items:{type:String,required:!0},quotas:{type:String,required:!0},updateSettings:{type:Function,required:!0}},methods:{updateWidth:function(t){var e=parseInt(t,10);isNaN(e)&&(e=800),this.updateSettings({width:e})},updateHeight:function(t){var e=parseInt(t,10);isNaN(e)&&(e=600),this.updateSettings({height:e})},updateItems:function(t){var e=this.text2array(t);this.updateSettings({items:e})},updateQuotas:function(t){var e=this.text2array(t);e=e.map((function(t){return parseInt(t)})),e=e.filter((function(t){return!isNaN(t)})),e.sort((function(t,e){return e-t})),this.updateSettings({quotas:e})},text2array:function(t){return t.trim().replace(/\s+/gm," ").split(" ")}}}),pt=ft,vt=r("8654"),dt=r("a844"),gt=Object(T["a"])(pt,lt,ht,!1,null,null,null),bt=gt.exports;B()(gt,{VCol:st["a"],VContainer:it["a"],VRow:ot["a"],VTextField:vt["a"],VTextarea:dt["a"]});var yt=["#cc0000","#00cc00","#0000cc","#cccc00","#cc00cc","#00cccc"],mt={name:"App",components:{Shuffle:ct,Settings:bt},data:function(){return{tab:null,width:800,height:600,textItems:"桐壺\n帚木\n空蝉\n夕顔\n若紫\n末摘花\n紅葉賀\n花宴\n葵\n賢木\n花散里\n須磨\n明石\n澪標\n蓬生\n関屋\n絵合\n松風\n薄雲\n朝顔\n少女\n玉鬘\n初音\n胡蝶\n蛍",textQuotas:"5\n4\n4\n4\n4\n4",items:[],quotas:[],ingroup:[],groups:[]}},computed:{},methods:{updateSettings:function(t){for(var e in t)this[e]=t[e];var r=this.items.length,n=this.quotas.reduce((function(t,e){return t+e})),a=this.quotas.length;if(0==r)return this.ingroup.quotas(0),void this.ingroup.splice(0);if(r!=n){var s=Math.min(r,0==this.quotas.length?5:this.quotas[0]);a=Math.floor(r/s),s=Math.floor(r/a);var i=r-s*a;this.quotas.splice(0);for(var o=0;o<a;o++)this.quotas.push(o<i?s+1:s)}this.ingroup.splice(0);for(var u=0;u<a;u++)for(var c=0;c<this.quotas[u];c++)this.ingroup.push(u);this.textItems=this.items.join("\n"),this.textQuotas=this.quotas.join("\n"),this.$refs.shuffle.resizeCanvas()},updateGroups:function(t){var e=this.items.length,r=this.quotas.length;if(t&&"undefined"!==typeof t.length&&t.length==r)this.ingroup.splice(0,this.ingroup.length,t);else{this.ingroup.splice(0);for(var n=0,a=0;a<r;a++)for(var s=0;s<this.quotas[a];s++)this.ingroup[n]=a,n++;n!=e&&console.log("WARNING: sum(quotas)=".concat(n," items.length=").concat(e))}this.groups.splice(0);for(var i=0;i<r;i++){var o=[];o.color=yt[i%yt.length],this.groups.push(o)}for(var u=0;u<e;u++)this.groups[this.ingroup[u]].push(u)}},mounted:function(){this.items=this.textItems.split("\n"),this.quotas=this.textQuotas.split("\n").map((function(t){return parseInt(t)}))}},xt=mt,wt=r("7496"),qt=r("71a3"),_t=r("c671"),jt=r("fe57"),Ot=r("aac8"),$t=Object(T["a"])(xt,a,s,!1,null,null,null),At=$t.exports;B()($t,{VApp:wt["a"],VBtn:H["a"],VContainer:it["a"],VIcon:J["a"],VTab:qt["a"],VTabItem:_t["a"],VTabs:jt["a"],VTabsItems:Ot["a"]});var St=r("f309");n["a"].use(St["a"]);var Ct=new St["a"]({});n["a"].config.productionTip=!1,new n["a"]({vuetify:Ct,render:function(t){return t(At)}}).$mount("#app")},"648b":function(t,e,r){"use strict";r("9c9b")},"79d0":function(t,e,r){"use strict";r("f320")},"9c9b":function(t,e,r){},f320:function(t,e,r){}});
//# sourceMappingURL=app.b64a32d7.js.map